<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <!-- <script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="x5-fullscreen" content="true">
    <meta name="full-screen" content="yes">
    <meta name="renderer" content="webkit">
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="Cache-Control"content="no-cache"/>
    <meta http-equiv="x-rim-auto-match" content="none"> 
    <title>仟姿惠</title>
    <link rel="stylesheet" href="../../lib/swiper/swiper-4.1.6.min.css">
    <style>
        body{ margin: 0;padding: 0;font-family: "微软雅黑";}
        body,html{-webkit-text-size-adjust: none;width: 100%;height: 100%;}
        *{text-decoration: none;list-style: none;}
        img{border: 0px;vertical-align: middle;text-align: center;}
        ul,li,dl,dd,dt,p,ol,h1,h2,h3,h4,h5{font-size: 12px;font-weight: 100;padding: 0;margin: 0;}
        .wrap{margin: 0 auto;}
        .fl{float: left;}
        .fr{float: right;}
        .index{overflow: hidden;}
        .clr{clear:both; height:0px; width:100%; font-size:1px; line-height:0px; visibility:hidden; overflow:hidden;}
        .pointer{cursor:pointer;}
        a,input,button{ outline:none; }
        ::-moz-focus-inner{border:0px;}
        /*a:link {color:#0f0;text-decoration:none;} 
        a:visited {color: #FFFF00; text-decoration:none;} 
        a:hover {color: #00FF00; text-decoration:underline;} 
        a:active {color: #0000FF; text-decoration:underline;}*/
        a{color: #000;}
        .wrapper{clear: both;width: 100%;}
        /* word-break:break-all 文字换行 */
        /*white-space:nowrap 文字不换行*/

        /*默认滚动条样式修改ie9 google Firefox 等高版本浏览器有效*/
        /* ::selection {background: #D03333;color: white;text-shadow: none;}
        ::-webkit-scrollbar-track-piece{width:10px;background-color:#f2f2f2}
        ::-webkit-scrollbar{width:10px;height:6px}
        ::-webkit-scrollbar-thumb{height:50px;background-color:rgba(0,0,0,.3);}
        ::-webkit-scrollbar-thumb:hover{background:#cc0000} */


        /*渐变*/
        /*background-image: -moz-linear-gradient(top, #8fa1ff, #3757fa);
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ff4f02), color-stop(1, #8f2c00)); Saf4+, Chrome 
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#c6ff00', endColorstr='#538300', GradientType='0'); IE*/
        * {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        *::-webkit-scrollbar {
            width: 0px;
            height: 0px;
        }

        input,
        textarea {
        border: 0; 
        -webkit-appearance: none; 
        }   

        * ::-webkit-scrollbar-thumb {
            border-radius: 0px;
            -webkit-box-shadow: inset 0 0 0px rgba(0, 0, 0, 0);
            background: rgba(0, 0, 0, 0);
        }

        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            display: none;
        }

        html,
        body,
        #app {
            width: 100%;
            height: 100%;
        }

        body {
            /* position: relative; */
            overflow: hidden;
            overflow-y: hidden;
            /* top: 0; */
        }

        #app {
            overflow: hidden;
        }
        .swiper-container,
        .swiper-slide,
        .swiper-slide img{
            width: 100%;
            height: 100%;
        }
        .swiper-slide{
            /* position: relative; */
        }
        #log {
            width: 100%;
            height: 100%;
            background-color: #f8f8f8;
            /* margin-bottom: 1.4667rem; */
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex-direction: column;
            overflow: hidden;
            flex-wrap: nowrap;
        }
        .containerButton{
            width: 100%;
            height: 100%;
            /* margin-bottom: 1.4667rem; */
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex-direction: column;
            overflow: hidden;
            flex-wrap: nowrap;
        }
        .container{
            -webkit-box-flex: 1; /* OLD - iOS 6-, Safari 3.1-6 */ 
            -moz-box-flex: 1; /* OLD - Firefox 19- */ 
            /* width: 20%; For old syntax, otherwise collapses. */
            -webkit-flex: 1; /* Chrome */ 
            -ms-flex: 1; /* IE 10 */ 
            flex: 1; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex: 1 1 auto;
            overflow-x: hidden;
            overflow-y: auto;
            /*解决ios上滑动不流畅*/
            -webkit-overflow-scrolling: touch;
            position: relative;
            width: 100%;
            height: 100%;
        }
        #log::-webkit-scrollbar {
            display: none;
        }
        .main_pay_box {padding: 0 10px 10px;}
        .main_pay_box ul {padding: 10px 0;border-bottom: 1px solid #f0f0f0;}
        .main_pay_box h3 {font-size: 14px;color: #333;margin: 5px 0;}
        .main_pay_box li {color: #777;margin-top: 5px;    font-size: 13px;line-height: 1.5;}
        #log .containerButton .PageView{
            position: absolute;
            font-size: 0.32rem;
            color: #fff;
            top: 1.84rem;
            left: 0.8rem;
            text-shadow: 1px 1px 1px rgba(27.8%, 27.8%, 27.8%, 0.4);
        }
        #log .containerButton .tools{
            position: absolute;
            bottom: 1.6267rem;
            right: 0.5333rem;
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex-direction: column;
            align-items: center;
        }
        #log .containerButton .tools>div{
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex-direction: column;
            align-items: center;
        }
        #log .containerButton .tools>div:not(:last-of-type){
            margin-bottom: 0.24rem;
        }
        #log .containerButton .tools>div img{
            width: 1.3333rem;
            height: 1.3333rem;
        }
        #log .container .containerButton .tools .Avatar{
            position: relative;
            margin-bottom: 0.4667rem;
        }
        #log .containerButton .tools .Avatar .add{
            width: 0.4533rem;
            height: 0.4533rem;
            position: absolute;
            bottom: -0.2267rem;
        }
        #log .containerButton .tools .info{
            font-size: 0.32rem;
            color: #fff;
            text-shadow: 1px 1px 1px rgba(27.8%, 27.8%, 27.8%, 0.4);
            margin-top: 0.1067rem;
        }
        #log .containerButton .keywordInfo{
            position: absolute;
            left: 0.5333rem;
            bottom: 1.6267rem;
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
            flex-direction: column;
        }
        #log .containerButton .keywordInfo .dateInfo{
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
        }
        #log .containerButton .keywordInfo .dateInfo>div{
            padding: 0.1067rem 0.5333rem 0.1067rem 0.2667rem;
            border-radius: 0.5333rem;
            background: rgba(0, 0, 0, 0.3);
            color: #fe61ae;
            text-shadow: 1px 1px 1px rgba(27.8%, 27.8%, 27.8%, 0.4);
            font-size: 0.32rem;
            margin-bottom: 0.32rem;
        }
        #log .containerButton .keywordInfo .dateInfo img{
            width: 0.3467rem;
            height: 0.3467rem;
            margin-right: 0.08rem;
            vertical-align: bottom;
        }
        #log .containerButton .keyword ul{
            display: -webkit-box; /* OLD - iOS 6-, Safari 3.1-6 */ 
            display: -moz-box; /* OLD - Firefox 19- (buggy but mostly works) */ 
            display: -ms-flexbox; /* TWEENER - IE 10 */
            display: -webkit-flex; /* NEW - Chrome */ 
            display: flex; /* NEW, Spec - Opera 12.1, Firefox 20+ */
        }
        #log .containerButton .keyword:not(:last-of-type){
            margin-bottom: 0.1333rem;
        }
        #log .containerButton .keyword ul li:first-of-type{
            position: relative;
        }
        #log .containerButton .keyword ul li:first-of-type::before{
            content: "";
            display: block;
            width: 0.1333rem;
            height: 0.1333rem;
            background-color: yellow;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            margin-top: -0.06665rem;
            left: 0.2667rem;
        }
        #log .containerButton .keyword ul li{
            padding: 0.1067rem 0.6667rem;
            border-radius: 0.5333rem;
            background: rgba(0, 0, 0, 0.3);
            margin-right: 0.1333rem;
            font-size: 0.32rem;
            color: #fff;
            text-shadow: 1px 1px 1px rgba(27.8%, 27.8%, 27.8%, 0.4);
        }
        #log .containerButton .bottom{
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 1.3067rem;
            background-color: rgba(0, 0, 0, 0.5);
        }
        #log .containerButton .top{
            position: absolute;
            top: 0;
            width: 100%;
            height: 0.5333rem;
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body scoll=no style="height:100%;">
    <div id="app">
        <div id="log">
            
        </div>
    </div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="../../lib/arttemplate/template-web.js"></script>
<script type="text/javascript" src="../../js/base/public.js?rev=@@hash"></script>
<script src="../../lib/swiper/swiper-4.1.6.min.js"></script>
<script>
    /**
 * 设置html-动态font-size rem
 */
    (function (win, lib) {
        var doc = win.document;
        var docEl = doc.documentElement;
        var metaEl = doc.querySelector('meta[name="viewport"]');
        var flexibleEl = doc.querySelector('meta[name="flexible"]');
        var dpr = 0;
        var scale = 0;
        var tid;
        var flexible = lib.flexible || (lib.flexible = {});

        if (metaEl) {
            console.warn('将根据已有的meta标签来设置缩放比例');
            var match = metaEl.getAttribute('content').match(/initial\-scale=([\d\.]+)/);
            if (match) {
                scale = parseFloat(match[1]);
                dpr = parseInt(1 / scale);
            }
        } else if (flexibleEl) {
            var content = flexibleEl.getAttribute('content');
            if (content) {
                var initialDpr = content.match(/initial\-dpr=([\d\.]+)/);
                var maximumDpr = content.match(/maximum\-dpr=([\d\.]+)/);
                if (initialDpr) {
                    dpr = parseFloat(initialDpr[1]);
                    scale = parseFloat((1 / dpr).toFixed(2));
                }
                if (maximumDpr) {
                    dpr = parseFloat(maximumDpr[1]);
                    scale = parseFloat((1 / dpr).toFixed(2));
                }
            }
        }

        if (!dpr && !scale) {
            var isAndroid = win.navigator.appVersion.match(/android/gi);
            var isIPhone = win.navigator.appVersion.match(/iphone/gi);
            var devicePixelRatio = win.devicePixelRatio;
            if (isIPhone) {
                // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案
                if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {
                    dpr = 3;
                } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {
                    dpr = 2;
                } else {
                    dpr = 1;
                }
            } else {
                // 其他设备下，仍旧使用1倍的方案
                dpr = 1;
            }
            scale = 1 / dpr;
        }

        docEl.setAttribute('data-dpr', dpr);
        if (!metaEl) {
            metaEl = doc.createElement('meta');
            metaEl.setAttribute('name', 'viewport');
            metaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');
            if (docEl.firstElementChild) {
                docEl.firstElementChild.appendChild(metaEl);
            } else {
                var wrap = doc.createElement('div');
                wrap.appendChild(metaEl);
                doc.write(wrap.innerHTML);
            }
        }

        function refreshRem() {
            var width = docEl.getBoundingClientRect().width;
            var rem = width / 10;
            docEl.style.fontSize = rem + 'px';
            flexible.rem = win.rem = rem;
        }

        win.addEventListener('resize', function () {
            clearTimeout(tid);
            tid = setTimeout(refreshRem, 300);
        }, false);
        win.addEventListener('pageshow', function (e) {
            if (e.persisted) {
                clearTimeout(tid);
                tid = setTimeout(refreshRem, 300);
            }
        }, false);

        if (doc.readyState === 'complete') {
            doc.body.style.fontSize = 12 * dpr + 'px';
        } else {
            doc.addEventListener('DOMContentLoaded', function (e) {
                doc.body.style.fontSize = 12 * dpr + 'px';
            }, false);
        }


        refreshRem();

        flexible.dpr = win.dpr = dpr;
        flexible.refreshRem = refreshRem;
        flexible.rem2px = function (d) {
            var val = parseFloat(d) * this.rem;
            if (typeof d === 'string' && d.match(/rem$/)) {
                val += 'px';
            }
            return val;
        }
        flexible.px2rem = function (d) {
            var val = parseFloat(d) / this.rem;
            if (typeof d === 'string' && d.match(/px$/)) {
                val += 'rem';
            }
            return val;
        }

    })(window, window['lib'] || (window['lib'] = {}));


    /**
     * ios阻止缩放 
    */
    window.onload = function () {
        document.addEventListener('gesturestart', function (e) {
            e.preventDefault();
        });
        document.addEventListener('dblclick', function (e) {
            e.preventDefault();
        });
        document.addEventListener('touchstart', function (event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        });
        var lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            var now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    };
    document.documentElement.addEventListener('touchstart', function (event) {
        if (event.touches.length > 1) {
            event.preventDefault();
        }
    }, false);
    var lastTouchEnd = 0;
    document.documentElement.addEventListener('touchend', function (event) {
        var now = Date.now();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);

</script>
<script>
    var detailUtil = {
            'cache': {},
            //初始化
            'init': function () {
                var path = location.href;
                if (path.indexOf('?') >= 0) {
                    var params = path.substring(path.indexOf('?')+1, path.length).split('&'),
                        id = '',
                        his_id = '',
                        status = '';
                    for (var i = 0; i < params.length; i++) {
                        if (params[i].indexOf('id')!=-1) {
                            id = params[i].split('=')[1];
                        }else if (params[i].indexOf("hisId")!=-1) {
                            his_id = params[i].split("=")[1];
                        }else if (params[i].indexOf("status")!=-1) {
                            status = params[i].split("=")[1];
                        }
                    }
                    if(status){
                        detailUtil.status=status;
                    }
                    if(status=="10"||status=="11"){
                        if (id) {
                            detailUtil.id=id;
                            detailUtil.getGoodInfo(id,true);
                        }
                    }else{
                        if(his_id){
                            detailUtil.his_id=his_id;
                            detailUtil.getGoodInfo(his_id,false);
                        }
                    }
                }
            },
            'getGoodInfo': function (id,boolean) {
                var url= base,
                    data={};
                if(boolean){
                    url+='case/getCaseById';
                    data.id=id;
                }else{
                    url+='case/getCaseByHisId';
                    data.his_id=id;
                }     
                $.get(url, data, function (res) {
                    if (res.message) {
                        $('#log').html('');
                        $.Huimodalalert(res.message, 2000);
                    } else if (!res.message) {
                        detailUtil.cache.details = res.data;
                        detailUtil.renderGoodDetails(res);
                        
                    } else {
                        $('#log').html('');
                    }
                })
            },
            // 渲染详情
            'renderGoodDetails': function (data) {
                if(data.data!=undefined){
                    data.data.imgPath=imgPath;
                }
                var html = template("goodInfo", data.data);
                $('#log').html(html);
                var mySwiper = new Swiper ('.swiper-container', {
                    loop: false,
                })
            }
        }
    $(function(){
        detailUtil.init();
        var mySwiper = new Swiper ('.swiper-container', {
            loop: false,
        })
    })
</script>
<script id="goodInfo" type="text/html">
    <div class="container" style="position:relative;">
            <div class="swiper-container" style="position: relative;">
                <div class="containerButton" style="position:absolute;top:0;left:0;z-index:10;">
                    <div class="top"></div>
                    <span class="PageView">浏览：45510</span>
                    <div class="tools">
                        <div class="Avatar">
                            <img src="../../images/touxiang_tp_@2.png" alt="">
                            <img src="../../images/jia_@2x.png" alt="" class="add">
                        </div>
                        <div class="like">
                            <img src="../../images/xihuan_@2x.png" alt="">
                            <span class="info">2544</span>
                        </div>
                        <div class="comment">
                            <img src="../../images/pinglun_@2x.png" alt="">
                            <span class="info">544</span>
                        </div>
                        <div class="detail">
                            <img src="../../images/riji_tb_@2x.png" alt="">
                            <span class="info">详情</span>
                        </div>
                    </div>
                    <div class="keywordInfo">
                        <div class="dateInfo">
                            <div>
                                <img src="../../images/yiyuan_@2x.png" alt="">
                                <span>变美手术前</span>
                            </div>
                        </div>
                        <div class="keyword">
                            <ul>
                                <li>{{goods_key_word}}</li>
                            </ul>
                        </div>
                        <div class="keyword">
                            <ul>
                                <li>{{user_key_word}}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="bottom">
                        
                    </div>
                </div>
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="../../images/default.png" alt="" class="preview-img" style="background: url('{{imgPath+before_main}}') no-repeat center;background-size:cover;">
                    </div>
                    {{if case_slaves}}
                {{each case_slaves item i}}
                            {{if item.after_pics.length}}
                                {{each item.after_pics imgItem j}}
                                <div class="swiper-slide">
                                    <img src="../../images/default.png" alt="" class="preview-img" style="background: url('{{imgPath+imgItem}}') no-repeat center;background-size:cover;">
                                </div>
                                {{/each}}
                            {{/if}}
                {{/each}}
            {{/if}}
                </div>
            </div>
        </div>
</script>
</html>